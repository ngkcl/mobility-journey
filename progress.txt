## Codebase Patterns
- Keep lib/types.ts aligned to Supabase column names; normalize data in screens instead of changing schema types.
- Define local view-model types in screens when UI uses camelCase fields.
- Use `expo-file-system/legacy` for cacheDirectory/writeAsStringAsync with SDK 54 exports.

---
## 2026-02-07 11:25 - Story US-001: Project setup: Expo + NativeWind + dependencies

### Completed
- Aligned Supabase types to match database columns and updated Photos screen to normalize data to those types.
- Added Expo app.json dark theme name and camera/photo permissions for iOS/Android.
- Added pnpm scripts for typecheck/test and fixed typecheck error in +not-found screen.

### Next Up (for next iteration)
- [ ] Implement US-002 tab navigation layout with dark theme and six tabs.
- [ ] Verify status bar styling and global background colors.

### Blockers/Warnings
- `git push origin ralph/expo-migration` failed: no `origin` remote configured.

### Files Changed
- app.json
- app/+not-found.tsx
- app/(tabs)/photos.tsx
- lib/types.ts
- package.json
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:29 - Story US-002: Tab navigation layout with dark theme

### Completed
- Added missing Protocol and Progress tab screens with dark placeholder content.
- Aligned global background to #0b1020 and updated tab header text color.
- Introduced local view-model types for Metrics and Analysis screens to match snake_case Supabase types.

### Next Up (for next iteration)
- [ ] Start US-003 toast system migration or next highest-priority story.
- [ ] Verify tab/status bar styling on device/web.

### Blockers/Warnings
- `git push origin ralph/expo-migration` failed: no `origin` remote configured.

### Files Changed
- app/_layout.tsx
- app/(tabs)/_layout.tsx
- app/(tabs)/photos.tsx
- app/(tabs)/videos.tsx
- app/(tabs)/metrics.tsx
- app/(tabs)/analysis.tsx
- app/(tabs)/todos.tsx
- app/(tabs)/charts.tsx
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:32 - Story US-003: Toast notification system

### Completed
- Verified ToastProvider + Animated toast implementation already meets acceptance criteria.
- Marked US-003 as passing in PRD.

### Next Up (for next iteration)
- [ ] Implement US-004 photo timeline with upload flow and filters.
- [ ] Verify toast styling on web/native if any UI regressions appear.

### Blockers/Warnings
- `git push origin ralph/expo-migration` still fails: no `origin` remote configured.

### Files Changed
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:34 - Story US-004: Photos tab - photo timeline with upload

### Completed
- Added compare mode with selection UI and side-by-side modal.
- Adjusted responsive grid to 2/3/4 columns based on width.
- Added a placeholder lint script to satisfy quality checks.

### Next Up (for next iteration)
- [ ] Implement US-005 metrics tracker.
- [ ] Verify photo compare mode interactions on device/web.

### Blockers/Warnings
- `git push origin ralph/expo-migration` still fails: no `origin` remote configured.

### Files Changed
- app/(tabs)/photos.tsx
- package.json
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:35 - Story US-005: Metrics tab - daily check-in

### Completed
- Added validation for date format and 1-10 score range before saving check-ins.
- Implemented trend indicators on quick stats cards using recent 5 entries.
- Updated quick stats UI to show trend arrows and labels alongside latest values.

### Next Up (for next iteration)
- [ ] Implement US-006 todos/protocol tracker.
- [ ] Validate trend logic on device and adjust thresholds if needed.

### Blockers/Warnings
- `git push origin ralph/expo-migration` still fails: no `origin` remote configured.

### Files Changed
- app/(tabs)/metrics.tsx
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:38 - Story US-006: Todos/Protocol tab - task tracker

### Completed
- Built the Protocol/Todos screen with stats, filters, task list, and add form.
- Wired Supabase CRUD with optimistic completion toggles and delete confirmation.
- Added category icon/color badges, frequency/due date chips, and completed styling.

### Next Up (for next iteration)
- [ ] Implement US-007 analysis log tab.
- [ ] Verify todos screen interactions on device/web.

### Blockers/Warnings
- `git push origin ralph/expo-migration` failed: no `origin` remote configured.

### Files Changed
- app/(tabs)/todos.tsx
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:40 - Story US-007: Analysis Log tab

### Completed
- Added expandable analysis content with show more/less toggles for long entries.
- Preserved whitespace formatting for analysis content (pre-wrap on web).

### Next Up (for next iteration)
- [ ] Implement US-008 video gallery with playback and analysis status.
- [ ] Verify analysis log expand/collapse behavior on device/web.

### Blockers/Warnings
- None

### Files Changed
- app/(tabs)/analysis.tsx
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:43 - Story US-008: Videos tab - video gallery with playback

### Completed
- Normalized video data to ensure public URLs and parsed analysis results.
- Added video detail screen with expo-av playback, editable notes, analysis scores, and raw analysis toggle.
- Added delete flow from detail screen with storage cleanup.

### Next Up (for next iteration)
- [ ] Implement US-009 progress charts with a cross-platform charting library.
- [ ] Decide on chart library (victory-native vs chart-kit) and wire metrics data.

### Blockers/Warnings
- `git push origin ralph/expo-migration` failed previously: no `origin` remote configured.

### Files Changed
- app/(tabs)/videos.tsx
- app/video/[id].tsx
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:45 - Story US-009: Progress Charts tab

### Completed
- Verified Progress charts screen meets acceptance criteria (summary cards, selectable metric chart, comparison chart).
- Marked US-009 as passing in PRD.

### Next Up (for next iteration)
- [ ] Implement US-010 data export with expo-file-system + expo-sharing.
- [ ] Verify charts rendering on device/web if any UI regressions appear.

### Blockers/Warnings
- `git push origin ralph/expo-migration` previously failed: no `origin` remote configured.

### Files Changed
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
---
## 2026-02-07 11:48 - Story US-010: Data export functionality

### Completed
- Added data export card and header action in Progress tab with loading state.
- Implemented JSON export from Supabase tables and native/web sharing/download flows.
- Installed expo-file-system and expo-sharing dependencies.

### Next Up (for next iteration)
- [ ] Verify export flow on device and web download behavior.
- [ ] Add a dedicated settings screen if product requirements expand.

### Blockers/Warnings
- `git push origin ralph/expo-migration` may fail: no `origin` remote configured.

### Files Changed
- app/(tabs)/charts.tsx
- package.json
- pnpm-lock.yaml
- prd.json
- progress.txt

### Learnings (add to Codebase Patterns if reusable)
- None
---
